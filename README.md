# astrbot_plugin_gender_detectorï¼ˆæœ‰bugï¼‰

æ™ºèƒ½ç®¡ç†ç”¨æˆ·ä¿¡æ¯å¹¶å¢å¼ºLLMå¯¹è¯ä½“éªŒçš„æ’ä»¶ï¼Œæ”¯æŒQQä¿¡æ¯è·å–ã€å†å²æ¶ˆæ¯åˆ†æã€æ™ºèƒ½ç§°å‘¼ç®¡ç†ç­‰åŠŸèƒ½

<div align="center">

[![Version](https://img.shields.io/badge/version-v0.0.1-blue.svg)](https://github.com/xSapientia/astrbot_plugin_user_info_manager)
[![AstrBot](https://img.shields.io/badge/AstrBot-%3E%3D3.4.0-green.svg)](https://github.com/Soulter/AstrBot)
[![License](https://img.shields.io/badge/license-MIT-yellow.svg)](LICENSE)

è®©ä½ çš„ AstrBot æ›´æ™ºèƒ½åœ°ç†è§£å’Œç®¡ç†ç”¨æˆ·ä¿¡æ¯ï¼

</div>

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### 1. æ™ºèƒ½ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- è‡ªåŠ¨è·å–å¹¶ç¼“å­˜QQç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ˜µç§°ã€ç¾¤åç‰‡ã€ç¾¤å¤´è¡”ã€å¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰
- æ”¯æŒè®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸï¼Œè¿‡æœŸè‡ªåŠ¨æ›´æ–°
- æ¯æ—¥å®šæ—¶æ‰«æç¾¤æˆå‘˜ä¿¡æ¯ï¼Œä¿æŒæ•°æ®æœ€æ–°

### 2. å†å²æ¶ˆæ¯æ™ºèƒ½åˆ†æ
- è‡ªåŠ¨åˆ†æå†å²å¯¹è¯ï¼Œè¯†åˆ«ç”¨æˆ·çš„å„ç§ç§°å‘¼
- æ™ºèƒ½ç®¡ç†ç§°å‘¼ä¼˜å…ˆçº§ï¼ˆæœ¬äººå¼ºè°ƒ > ä»–äººç§°å‘¼ > ç¾¤å¤´è¡”/åç‰‡ > æ˜µç§°ï¼‰
- æ”¯æŒè®¾ç½®æ¯ä¸ªç”¨æˆ·çš„æœ€å¤§ç§°å‘¼æ•°é‡

### 3. LLMå¯¹è¯å¢å¼º
- åœ¨LLMè¯·æ±‚æ—¶è‡ªåŠ¨æ’å…¥ç›¸å…³ç”¨æˆ·ä¿¡æ¯
- æ™ºèƒ½è¯†åˆ«å¯¹è¯ä¸­æ¶‰åŠçš„ç”¨æˆ·æ•°é‡
- ä¸º@æ¶ˆæ¯å’Œç§°å‘¼è‡ªåŠ¨é™„åŠ ç”¨æˆ·è¯¦ç»†ä¿¡æ¯

### 4. çµæ´»çš„é…ç½®é€‰é¡¹
- å®Œå–„çš„å¯è§†åŒ–é…ç½®ç•Œé¢
- æ”¯æŒå¼€å…³å„é¡¹åŠŸèƒ½
- å¯è°ƒè¯•æ¨¡å¼ï¼Œæ–¹ä¾¿é—®é¢˜æ’æŸ¥

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€æŒ‡ä»¤

| æŒ‡ä»¤ | åˆ«å | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|------|----------|
| `/gender` | `æ€§åˆ«`, `sex` | æŸ¥è¯¢ç”¨æˆ·æ€§åˆ«ä¿¡æ¯ | æ‰€æœ‰åœºæ™¯ |
| `/gender_scan` | `gscan`, `æ‰«æç¾¤æˆå‘˜` | ä¸»åŠ¨æ‰«æç¾¤æˆå‘˜ä¿¡æ¯ | ä»…ç¾¤èŠ |

### ä½¿ç”¨ç¤ºä¾‹

**æŸ¥è¯¢æ€§åˆ«ï¼š**
```
/gender @æŸäºº  # æŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„æ€§åˆ«
/gender        # æŸ¥è¯¢è‡ªå·±çš„æ€§åˆ«
/æ€§åˆ« å°æ˜      # é€šè¿‡ç§°å‘¼æŸ¥è¯¢ï¼ˆå¦‚æœç¼“å­˜ä¸­æœ‰ï¼‰
```

**æ‰«æç¾¤æˆå‘˜ï¼š**
```
/gscan         # ç«‹å³æ‰«æå½“å‰ç¾¤çš„æ‰€æœ‰æˆå‘˜ä¿¡æ¯
```

## âš™ï¸ é…ç½®è¯´æ˜

æ’ä»¶æ”¯æŒåœ¨ AstrBot ç®¡ç†é¢æ¿ä¸­è¿›è¡Œå¯è§†åŒ–é…ç½®ï¼š

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `enable_plugin` | bool | true | æ’ä»¶æ€»å¼€å…³ |
| `cache_valid_days` | int | 7 | ç”¨æˆ·ä¿¡æ¯ç¼“å­˜æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰ |
| `enable_daily_scan` | bool | true | æ˜¯å¦å¯ç”¨æ¯æ—¥è‡ªåŠ¨æ‰«æ |
| `daily_scan_time` | string | "03:00" | æ¯æ—¥æ‰«ææ—¶é—´ï¼ˆ24å°æ—¶åˆ¶ï¼‰ |
| `history_messages_count` | int | 100 | æ™ºèƒ½æ•´ç†æ—¶è¯»å–çš„å†å²æ¶ˆæ¯æ•° |
| `max_nicknames` | int | 5 | æ¯ä¸ªç”¨æˆ·æœ€å¤šç¼“å­˜çš„ç§°å‘¼æ•°é‡ |
| `enable_llm_prompt_insert` | bool | true | æ˜¯å¦åœ¨LLMè¯·æ±‚æ—¶æ’å…¥ç”¨æˆ·ä¿¡æ¯ |
| `show_debug_info` | bool | false | æ˜¯å¦æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ |
| `delete_on_uninstall` | bool | false | å¸è½½æ—¶æ˜¯å¦åˆ é™¤æ‰€æœ‰æ•°æ® |

## ğŸ“Š å·¥ä½œåŸç†

### ä¿¡æ¯è·å–æµç¨‹
1. **ä¸»åŠ¨è·å–**ï¼šé€šè¿‡æŒ‡ä»¤æˆ–å®šæ—¶ä»»åŠ¡ä¸»åŠ¨è·å–ç”¨æˆ·ä¿¡æ¯
2. **è¢«åŠ¨ç¼“å­˜**ï¼šåœ¨å¤„ç†æ¶ˆæ¯æ—¶è‡ªåŠ¨ç¼“å­˜ç›¸å…³ç”¨æˆ·ä¿¡æ¯
3. **æ™ºèƒ½æ›´æ–°**ï¼šç¼“å­˜è¿‡æœŸåè‡ªåŠ¨æ›´æ–°ï¼Œç¡®ä¿ä¿¡æ¯å‡†ç¡®

### ç§°å‘¼ä¼˜å…ˆçº§ç³»ç»Ÿ
1. **æœ€é«˜ä¼˜å…ˆçº§**ï¼šç”¨æˆ·æœ¬äººå¼ºè°ƒçš„ç§°å‘¼ï¼ˆå¦‚"å«æˆ‘xxx"ï¼‰
2. **æ¬¡é«˜ä¼˜å…ˆçº§**ï¼šå…¶ä»–äººå¯¹è¯¥ç”¨æˆ·çš„ç§°å‘¼
3. **é»˜è®¤ä¼˜å…ˆçº§**ï¼šç¾¤å¤´è¡” > ç¾¤åç‰‡ > QQæ˜µç§°

### LLMå¢å¼ºæœºåˆ¶
- è‡ªåŠ¨ç»Ÿè®¡å¯¹è¯æ¶‰åŠçš„ç”¨æˆ·æ•°é‡
- åœ¨æ¶ˆæ¯å‰ç¼€æ’å…¥å‘é€è€…è¯¦ç»†ä¿¡æ¯
- ä¸º@æ¶ˆæ¯å’Œç§°å‘¼é™„åŠ ç”¨æˆ·å±æ€§

## ğŸ’¾ æ•°æ®å­˜å‚¨

æ’ä»¶æ•°æ®ä¿å­˜ä½ç½®ï¼š
- ç”¨æˆ·ä¿¡æ¯ï¼š`data/plugin_data/astrbot_plugin_user_info_manager/user_info.json`
- ç§°å‘¼ä¼˜å…ˆçº§ï¼š`data/plugin_data/astrbot_plugin_user_info_manager/nickname_priority.json`
- æ’ä»¶é…ç½®ï¼š`data/config/astrbot_plugin_user_info_manager_config.json`

## ğŸ”§ é«˜çº§ç‰¹æ€§

### æ™ºèƒ½ç§°å‘¼è¯†åˆ«
- è‡ªåŠ¨å­¦ä¹ ç¾¤å†…çš„ç§°å‘¼ä¹ æƒ¯
- æ”¯æŒå¤šç§ç§°å‘¼æ¨¡å¼è¯†åˆ«
- æ™ºèƒ½ç®¡ç†ç§°å‘¼ä¼˜å…ˆçº§

### ç¼“å­˜ç®¡ç†
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
- æ”¯æŒæ‰‹åŠ¨åˆ·æ–°ç¼“å­˜
- é«˜æ•ˆçš„å†…å­˜ä½¿ç”¨

### å¹³å°å…¼å®¹æ€§
- å®Œç¾æ”¯æŒ AIOCQHTTP å¹³å°
- é¢„ç•™å…¶ä»–å¹³å°æ¥å£
- ä¼˜é›…çš„é™çº§å¤„ç†

## ğŸ› æ•…éšœæ’é™¤

### æ’ä»¶æ— å“åº”
1. æ£€æŸ¥æ’ä»¶æ˜¯å¦å·²å¯ç”¨
2. æŸ¥çœ‹ AstrBot æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. å¼€å¯è°ƒè¯•æ¨¡å¼æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

### ä¿¡æ¯è·å–å¤±è´¥
1. ç¡®è®¤æœºå™¨äººæœ‰è·å–æˆå‘˜ä¿¡æ¯çš„æƒé™
2. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. æŸ¥çœ‹å¹³å°æ˜¯å¦æ”¯æŒç›¸å…³API

### æ€§èƒ½é—®é¢˜
1. é€‚å½“å‡å°‘å†å²æ¶ˆæ¯è¯»å–æ•°é‡
2. å¢åŠ ç¼“å­˜æœ‰æ•ˆæœŸ
3. åœ¨ç”¨æˆ·è¾ƒå°‘çš„æ—¶æ®µè¿›è¡Œæ‰«æ

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.0.1 (2024-12-XX)
- âœ… å®ç°ç”¨æˆ·ä¿¡æ¯è‡ªåŠ¨è·å–å’Œç¼“å­˜
- âœ… æ·»åŠ æ™ºèƒ½ç§°å‘¼ç®¡ç†ç³»ç»Ÿ
- âœ… å®ç°LLMå¯¹è¯å¢å¼ºåŠŸèƒ½
- âœ… æ”¯æŒå®šæ—¶æ‰«æç¾¤æˆå‘˜
- âœ… å®Œå–„çš„é…ç½®ç³»ç»Ÿ
- âœ… è°ƒè¯•æ¨¡å¼æ”¯æŒ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘è®¡åˆ’
- [ ] æ”¯æŒæ›´å¤šå¹³å°
- [ ] æ·»åŠ ç”¨æˆ·ç”»åƒåŠŸèƒ½
- [ ] æ”¯æŒè‡ªå®šä¹‰ä¿¡æ¯æ¨¡æ¿
- [ ] å¢åŠ ç»Ÿè®¡åˆ†æåŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¨â€ğŸ’» ä½œè€…

- **xSapientia** - *Initial work* - [GitHub](https://github.com/xSapientia)

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ [AstrBot](https://github.com/Soulter/AstrBot) é¡¹ç›®æä¾›çš„å¼ºå¤§æ¡†æ¶
- æ„Ÿè°¢æ‰€æœ‰ç”¨æˆ·çš„åé¦ˆå’Œå»ºè®®

---

<div align="center">

å¦‚æœè¿™ä¸ªæ’ä»¶å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Starï¼

[æŠ¥å‘Šé—®é¢˜](https://github.com/xSapientia/astrbot_plugin_user_info_manager/issues) Â· [åŠŸèƒ½å»ºè®®](https://github.com/xSapientia/astrbot_plugin_user_info_manager/issues) Â· [æŸ¥çœ‹æ›´å¤šæ’ä»¶](https://github.com/xSapientia)

</div>
